{% extends "controls/base.html" %}

{% block center %}

    {% if user.is_authenticated %}
        <meta http-equiv="refresh" content="0;url={% url 'index' %}" />
    {% else %}
    <br><br><br><br><br>
        <h3 align="center" class="color2">Сброс пароля</h3>
        <br>
    <form class="needs-validation" action="{% url 'password_reset' %}" method="post" novalidate>{% csrf_token %}
            <div class="form-floating mb-3">
                <input name="user_email" type="email" class="form-control" id="user_email" placeholder="Адрес электронной почты" required>
                <label for="user_email" class="form-label">Адрес электронной почты</label>
                <div class="valid-feedback">Принято</div>
                <div class="invalid-feedback">Введите адрес электронной почты</div>
            </div>
            <button type="submit" value="OK" class="btn btn-primary mb-3"> Отправить ссылку для восстановления </button>
    </form>
            <script>
            (function () {
            'use strict'
            var forms = document.querySelectorAll('.needs-validation')
            Array.prototype.slice.call(forms)
                .forEach(function (form) {
                    form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }
                    form.classList.add('was-validated')
                    }, false)
                })
            })()
            </script>
    {% endif %}

{% endblock %}